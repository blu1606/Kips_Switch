# 16.1: Functional Hook Extraction

## ðŸŽ¯ Objective
Extract complex business logic from `StepConfirm.tsx` and `ClaimModal.tsx` into reusable custom hooks.

## ðŸ›  Target Hooks

### 1. `useCreateVault`
- **Location:** `src/hooks/useCreateVault.ts`
- **Responsibilities:**
  - `assembleBundle(items)`: Formats items into a IPFS-ready blob.
  - `encryptPackage(file, mode)`: Handles both Wallet and Password encryption.
  - `initializeOnChain(formData, cid)`: Builds and sends the Solana transaction.
- **Benefits:** Removes ~200 lines from `StepConfirm`.

### 2. `useVaultUnlock`
- **Location:** `src/hooks/useVaultUnlock.ts`
- **Responsibilities:**
  - State management for the 4-state reveal flow.
  - IPFS content fetching and metadata caching.
  - Decryption version detection and execution (v1, v2, v3).
- **Benefits:** Removes ~300 lines from `ClaimModal`.

### 3. `useVaultActions`
- **Location:** `src/hooks/useVaultActions.ts`
- **Responsibilities:**
  - `claimSol(vault)`
  - `claimTokens(vault)`
  - `claimAndClose(vault)`
- **Benefits:** Centralizes on-chain claim logic used across the dashboard and claim views.

---

## âœ… Acceptance Criteria
- [ ] No significant business logic remains in the `onHandle` methods of components.
- [ ] Hooks are unit-testable in isolation.
- [ ] `pnpm run lint` passes with no unused variables in the new hooks.
