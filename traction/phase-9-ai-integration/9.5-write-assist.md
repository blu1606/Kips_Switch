# 9.5 Write Assist Implementation Plan

> **Status:** Implementation Ready
> **Priority:** P1 (Hackathon Quick Win)

## ðŸŽ¯ Goal
Help users overcome "blank page paralysis" when writing their final message by offering AI-generated suggestions based on simple prompts (Relation, Sentiment, Tone).

## ðŸ›¡ï¸ User Review & Privacy
- **Privacy:** strict zero-logging policy. Drafts are processed ephemerally.
- **Style:** Modal-based flow to maintain focus without cluttering the main wizard.

## ðŸ› ï¸ Proposed Changes

### UI Components

#### [NEW] `WriteAssistModal.tsx`
A modal invoked by a "âœ¨ Help me write" button.
- **Privacy Seal:** "processed ephemerally, never stored" badge.
- **Step 1:** Input "Who is this for?" (Relation) e.g., "Daughter"
- **Step 2:** Input "Key Memory/Sentiment?" (Context) e.g., "Proud of career"
- **Step 3:** Select Tone: `Sentimental` | `Direct` | `Humorous`
- **Step 4:** "Generate" â†’ Calls API
- **Step 5:** Display Draft â†’ actions: "Use this" / "Try Again"

#### [MODIFY] `StepEncryptedMessage.tsx`
- Add "âœ¨ Help me write" button above the text area.
- Handle callback to insert generated text into the main message field.

### API Architecture

#### [NEW] `POST /api/ai/write-assist`
- **Input:** `{ relation: string, sentiment: string, tone: string }`
- **Output:** `{ draft: string }`
- **Provider:** Google Gemini (via `google-generative-ai`)
- **System Prompt:** "You are a specialized ghostwriter. Tone: {tone}. Brevity: High. Output plain text only."

## âœ… Verification Plan

### Automated
1. **API Test:** `curl -X POST /api/ai/write-assist` with sample data to verify JSON structure.

### Manual
1. **Open Wizard:** Navigate to "Create Vault" -> "Add Message".
2. **Trigger:** Click "âœ¨ Help me write".
3. **Flow:** Inputs: "Unknown Recipient", Sentiment: "Mystery", Tone: "Humorous".
4. **Result:** Verify draft generation.
5. **Insert:** Confirm text populates the main textarea.
6. **Privacy:** Verify no sensitive data payload in network logs beyond the ephemeral request.
