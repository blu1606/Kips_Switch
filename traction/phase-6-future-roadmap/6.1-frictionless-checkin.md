# 6.1 The Frictionless Heartbeat (Optimized Check-in)

## ðŸŽ¯ Goal
Reduce the friction of the "I'm Alive" check-in process to near zero to prevent accidental vault releases and improve user retention.

## ðŸ’¡ Solution 1: Delegated Check-in Key (On-chain)
Allow the Owner (Cold Wallet) to authorize a secondary "Delegate" address (Hot Wallet/Mobile) that has **only** the permission to call `ping()`.

### Technical Spec
- **Contract:** Add `delegate: Option<Pubkey>` to `Vault` struct.
- **Instruction:** `set_delegate(new_delegate)` (Only Owner can call).
- **Instruction:** `ping()` modified to allow `signer == owner || signer == delegate`.
- **Security:** Delegate CANNOT `update_vault`, `close_vault`, or view encrypted key.

## ðŸ’¡ Solution 2: Email "Snooze" (Magic Link)
Allow checking in by clicking a secure link in the reminder email, without connecting a wallet.

### Technical Spec
1.  **Server Wallet:** A backend wallet (Paying Relayer) managed by the platform.
2.  **Flow:**
    - Cron sends email with Magic Link: `app.com/api/checkin?token=JWT&vault=PUBKEY`
    - User clicks link.
    - API validates JWT.
    - **Relayer Wallet** sign transaction calling `ping()` on behalf of user.
    - *Constraint:* Contract needs to allow "Third-party Pinging" IF they have a signed permit/proof, OR we rely on Solution 1 (Relayer is the Delegate).
    - *Better Approach:* Combine with Sol 1. User sets Platform Relayer as Delegate.

## ðŸ’¡ Solution 3: Solana Blinks
Integrate with Dialect to render a "Check-in" button directly in Twitter/Discord feeds.

## âœ… Execution Steps
1.  [ ] Update Smart Contract (`lib.rs`) to add `delegate` field and logic.
2.  [ ] Add "Delegate Management" UI in Dashboard.
3.  [ ] (Optional) Build Relayer Service for Email Check-in.
