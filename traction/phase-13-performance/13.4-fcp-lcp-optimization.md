# 13.4 Landing Page FCP & LCP Optimization

## üéØ Goal
Drastically reduce **First Contentful Paint (FCP)** and **Largest Contentful Paint (LCP)** to meet Core Web Vitals "Good" thresholds.
- **Current FCP**: ~2.96s (Needs Improvement)
- **Current LCP**: ~2.96s (Needs Improvement)
- **Target**: FCP < 1.0s, LCP < 1.5s

## üîç Root Cause Analysis
1.  **Entire Page is Client-Side**: `src/app/page.tsx` starts with `'use client'`, forcing the browser to download, parse, and execute the entire JS bundle for the page before rendering *any* content.
2.  **LCP Element Hidden**: The Hero headline (LCP element) is wrapped in `<motion.div initial={{ opacity: 0 }}>`. Even if the HTML loaded fast, we explicitly hide it until JS hydration kicks in.
3.  **Heavy Initial Bundle**: All landing page sections (Problem, UseCase, FAQ, etc.) are imported statically, bloating the initial chunk.

## üìê Design Strategy

### 1. "Island Architecture" Refactor
Move `page.tsx` back to being a **Server Component**.
- Extract the hero interactivity (Kip reactions) into a specific `<HeroInteractive />` client component.
- Keep the Hero text and structural HTML static (server-rendered) for instant paint.

### 2. Prioritize LCP
- **Remove Hydration Dependency**: The Hero Title (`<h1>`) must be visible in the initial HTML.
- **CSS > JS for Entry**: If animation is needed, use CSS `@keyframes` which runs immediately, or rely on `framer-motion` *only* after initial paint, ensuring `initial={false}` or using specific techniques to prevent layout shift.
- **Preload Critical Assets**: Ensure fonts and hero images are preloaded (Next.js does this well for fonts, need to check images).

### 3. Aggressive Lazy Loading
Use `next/dynamic` for everything below the fold.
- `WhatIfSimulator`
- `UseCaseGrid`
- `PricingSection`
- `FAQSection`
- `StoryIsland` (can float in later)

## üõ†Ô∏è Implementation Steps

### Step 1: Deconstruct `page.tsx`
- [ ] Create `src/components/landing/hero/HeroInteractive.tsx` for the stateful parts (Kip mood, buttons).
- [ ] Remove `'use client'` from `src/app/page.tsx`.
- [ ] Render the `<h1>` and subtext as plain HTML/Tailwind in `page.tsx` for immediate LCP.

### Step 2: Fix LCP Visibility
- [ ] Update Hero text container: Remove `motion.div` wrapper or set `initial={{ opacity: 1 }}` for the text nodes.
- [ ] If fade-in is desired, apply a CSS-only class `animate-fade-in` that runs on load, but default to `opacity: 1` if JS is disabled/slow.

### Step 3: Implement Lazy Loading
```typescript
import dynamic from 'next/dynamic';

const ProblemSection = dynamic(() => import('@/components/landing/ProblemSection'));
const UseCaseGrid = dynamic(() => import('@/components/landing/UseCaseGrid'));
// ... other sections
```

### Step 4: Asset Optimization
- [ ] Verify `fonts` are using `next/font` correctly (already seems to be).
- [ ] Ensure `KipAvatar` (if in viewport) is optimized, but priority is text.

## ‚úÖ Verification
- Run local production build: `npm run build && npm start`.
- Use Chrome DevTools "Network" tab (Fast 3G throttle) to observe render timeline.
- Check "Performance" tab for LCP timing.
