# 4.2 Email Notification (Resend API)

## M·ª•c ti√™u
G·ª≠i email th√¥ng b√°o cho owner (reminder) v√† recipient (release notification).

## Resend Setup

### 1. Create Account
- ƒêƒÉng k√Ω t·∫°i [resend.com](https://resend.com)
- Verify domain ho·∫∑c d√πng sandbox

### 2. Environment Variables
```env
RESEND_API_KEY=re_xxxxx
EMAIL_FROM=noreply@yourdomain.com
```

## Email Templates

### Template 1: Owner Reminder
**Subject:** ‚ö†Ô∏è Your Deadman's Switch needs attention

**Body:**
```
Hi,

Your vault will release in [X days] if you don't check in.

Vault ID: [short_id]
Recipient: [recipient_address]
Deadline: [date]

[Check In Now] button

If you're unable to check in, your vault contents will be released to the recipient.
```

### Template 2: Release Notification (Recipient)
**Subject:** üîì A Digital Legacy Has Been Released to You

**Body:**
```
Hi,

A vault has been released to your wallet.

From: [owner_address]
Released at: [timestamp]

[Claim Your Legacy] button

Connect your wallet to decrypt and download the contents.
```

## Send Function
```typescript
import { Resend } from 'resend';

const resend = new Resend(process.env.RESEND_API_KEY);

async function sendEmail(to: string, subject: string, html: string) {
  await resend.emails.send({
    from: process.env.EMAIL_FROM,
    to,
    subject,
    html
  });
}
```

## Email Schedule
| Trigger | Recipient | Template |
|---------|-----------|----------|
| 7 days before | Owner | Reminder |
| 3 days before | Owner | Urgent Reminder |
| 24 hours before | Owner | Final Warning |
| Vault released | Recipient | Release Notification |

## Acceptance Criteria
- [ ] Email g·ª≠i th√†nh c√¥ng qua Resend
- [ ] Template render ƒë√∫ng data
- [ ] Kh√¥ng spam (track ƒë√£ g·ª≠i ch∆∞a)
