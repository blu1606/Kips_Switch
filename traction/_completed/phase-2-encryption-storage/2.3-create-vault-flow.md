# 2.3 Create Vault Flow (Wizard)

## Mục tiêu
Xây dựng wizard 4 bước để tạo Vault, kết nối encryption → IPFS → smart contract.

## Wizard Steps

### Step 1: Upload Secret
**UI Elements:**
- Dropzone (drag & drop)
- Text: "Drag file (max 50MB) hoặc nhập text"
- Progress states: Compressing → Encrypting → ✓ Done

**Logic:**
1. User drop file
2. Validate size ≤ 50MB
3. Generate AES key từ wallet signature
4. Encrypt file
5. **Hiển thị Decryption Key** - user cần backup

### Step 2: Set Recipient
**UI Elements:**
- Input: Recipient Wallet Address (Solana address validation)
- Input: Recipient Email (optional - for notifications)

**Validation:**
- Address phải là valid Solana pubkey
- Email format check

### Step 3: Set Heartbeat Interval
**UI Elements:**
- Card selection hoặc Slider
- Options: 30 days (default), 90 days, 1 year
- Display: "Nếu bạn không check-in trong X ngày..."

### Step 4: Confirm & Sign
**UI Elements:**
- Summary card: File size, Recipient, Interval
- Button: "Create Vault"
- Loading states: Uploading to IPFS → Confirming transaction

**Logic Flow:**
```
1. Upload encrypted file to IPFS → get CID
2. Encrypt AES key for recipient
3. Call initialize_vault(cid, encrypted_key, recipient, interval)
4. Wait for confirmation
5. Show success modal
```

## State Management
- Form state với React Hook Form hoặc useState
- Step navigation: Next/Back buttons
- Error handling mỗi step

## UX Requirements
- Progress indicator (Step 1/4, 2/4...)
- Clear feedback mỗi action
- Disable Next button cho đến khi step complete

## Acceptance Criteria
- [ ] 4-step wizard hoạt động smooth
- [ ] File encrypt trước khi upload
- [ ] Transaction confirm → Vault xuất hiện trên Dashboard
- [ ] Error states hiển thị rõ ràng
